<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Map</title>
    <style>
        #navbar {
            background-color: #333;
            color: white;
            padding: 10px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .checkbox-group {
            display: none;
            flex-direction: column;
        }

        #navbar:hover .checkbox-group {
            display: flex;
        }

        .checkbox-group label {
            margin-right: 10px;
        }

        .bathroom {
            display: none;
        }

        .close-btn {
            display: none;
            cursor: pointer;
            font-weight: bold;
        }
    </style>
</head>

<body>

<div id="navbar">
    <span>Filter Options</span>
    <div class="checkbox-group">
        <label><input type="checkbox" value="male" checked> Male</label>
        <label><input type="checkbox" value="female" checked> Female</label>
        <label><input type="checkbox" value="inclusive" checked> Gender Inclusive</label>
        <label><input type="checkbox" value="accessible" checked> Accessible</label>
    </div>
</div>

<svg width="500" height="500" id="map" viewBox="0 0 500 500">
    <!-- Building 1 -->
    <rect x="50" y="50" width="100" height="100" fill="blue" class="building" data-building="building1"></rect>

    <!-- Bathrooms in Building 1 Floor 1 -->
    <circle cx="75" cy="75" r="10" fill="yellow" class="bathroom" data-building="building1" data-floor="1" data-type="male"></circle>

    <!-- Bathrooms in Building 1 Floor 2 -->
    <circle cx="125" cy="75" r="10" fill="pink" class="bathroom" data-building="building1" data-floor="2" data-type="female"></circle>

    <!-- X button for Building 1 -->
    <text x="140" y="65" fill="white" class="close-btn" data-building="building1">X</text>

    <!-- ... More SVG elements for other buildings ... -->
</svg>

<div id="floorPanel" style="position: fixed; right: 0; top: 100px; display: none;">
    <button class="floor-btn" data-floor="1">Floor 1</button>
    <button class="floor-btn" data-floor="2">Floor 2</button>
    <!-- ... Add more buttons for more floors ... -->
</div>

<script>
let zoomedInBuilding = null;

const map = document.getElementById('map');
const buildings = document.querySelectorAll('.building');

function updateBathroomVisibility() {
    const allBathrooms = document.querySelectorAll('.bathroom');
    allBathrooms.forEach(bathroom => bathroom.style.display = 'none');

    if (zoomedInBuilding) {
        document.querySelectorAll('#navbar input[type="checkbox"]:checked').forEach(checkedBox => {
            const bathroomsToShow = document.querySelectorAll(`.bathroom[data-building="${zoomedInBuilding}"][data-type="${checkedBox.value}"][data-floor="${selectedFloor}"]`);
            bathroomsToShow.forEach(bathroom => bathroom.style.display = 'block');
        });
    }
}

function updateFloorVisibility() {
    const allBathrooms = document.querySelectorAll('.bathroom');
    allBathrooms.forEach(bathroom => bathroom.style.display = 'none');  // Reset visibility first

    document.querySelectorAll(`.bathroom[data-floor="${selectedFloor}"]`).forEach(bathroom => {
        if (bathroom.getAttribute('data-building') === zoomedInBuilding) {
            bathroom.style.display = 'block';
        }
    });
}

buildings.forEach(building => {
    building.addEventListener('click', function() {
        const buildingId = this.getAttribute('data-building');
        const bbox = this.getBBox();

        zoomedInBuilding = buildingId;
        map.setAttribute('viewBox', `${bbox.x} ${bbox.y} ${bbox.width} ${bbox.height}`);

        updateBathroomVisibility();
        document.querySelector(`.close-btn[data-building="${buildingId}"]`).style.display = 'block';
        floorPanel.style.display = 'block';
    });
});

const closeButtons = document.querySelectorAll('.close-btn');
closeButtons.forEach(btn => {
    btn.addEventListener('click', function() {
        map.setAttribute('viewBox', '0 0 500 500');
        const allBathrooms = document.querySelectorAll('.bathroom');
        allBathrooms.forEach(bathroom => bathroom.style.display = 'none');
        btn.style.display = 'none';
        floorPanel.style.display = 'none';  // Hide the floor panel when building is closed
        zoomedInBuilding = null;
    });
});

document.querySelectorAll('#navbar input[type="checkbox"]').forEach(checkbox => {
    checkbox.addEventListener('change', function() {
        updateBathroomVisibility();
        updateFloorVisibility();
    });
});

const floorPanel = document.getElementById('floorPanel');
const floorButtons = document.querySelectorAll('.floor-btn');
let selectedFloor = '1';  // Default floor

floorButtons.forEach(btn => {
    btn.addEventListener('click', function() {
        selectedFloor = this.getAttribute('data-floor');
        updateBathroomVisibility();
    });
});

</script>

</body>
</html>
